FROM haroldli/java:17 as corretto-jdk

FROM xiaoyaliu/alist:latest

LABEL MAINTAINER="Har01d"

ENV JAVA_HOME=/jre
ENV PATH="${JAVA_HOME}/bin:${PATH}"

COPY --from=corretto-jdk /jre $JAVA_HOME

VOLUME /opt/atv/data/

WORKDIR /opt/atv/

COPY entrypoint.sh init.sh index.sh /

COPY config/nginx.conf /etc/nginx/http.d/default.conf

COPY target/alist-tvbox-1.0.jar ./app.jar

COPY data/version data/app_version

EXPOSE 8080 80

ENTRYPOINT ["/entrypoint.sh"]